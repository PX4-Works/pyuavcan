import sys
import struct
import uavcan

if __name__ == "__main__":
    magic = 0xB007C0DE
    length = 128
    commit = 0x12345678
    major = 1
    minor = 2
    result = struct.pack("<LLQLBB", magic, length, 0, commit, major, minor)
    result += "\x00" * 106
    crc = uavcan.dsdl.signature.compute_signature(result)

    result = bytearray(result)
    result[8:16] = bytearray(struct.pack("<Q", crc))

    with open(sys.argv[1], "wb") as f:
        f.write(result)
